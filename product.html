<!DOCTYPE html>
<html lang="zh-HK">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ç”¢å“è©³æƒ… Â· å¾…å®š</title>
  <style>
    :root{ --border:#e5e7eb; --muted:#6b7280; --ring:#3b82f6; }
    body{font-family:ui-sans-serif,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;margin:0;background:#fff;color:#111827}
    a{color:inherit;text-decoration:none}
    header,footer{padding:12px 16px;border-bottom:1px solid var(--border);background:#f9fafb}
    footer{border-top:1px solid var(--border);border-bottom:none;color:#6b7280}
    .container{max-width:1100px;margin:0 auto;padding:16px}
    .wrap{display:flex;gap:20px;flex-wrap:wrap}
    .preview{flex:1 1 420px}
    .preview img{width:100%;aspect-ratio:1/1;object-fit:contain;background:#fff;border:1px solid var(--border);border-radius:10px}
    .meta{flex:1 1 320px}
    h1{margin:0 0 10px;font-size:22px}
    .price{color:#e11d48;font-weight:800;margin:8px 0}
    .muted{color:#6b7280}
    .row{margin:10px 0}
    input[type=number]{width:100px;padding:10px 12px;border:1px solid var(--border);border-radius:10px}
    .btn{padding:10px 14px;border:1px solid var(--border);border-radius:10px;cursor:pointer}
    .btn:focus,.input:focus{outline:2px solid var(--ring);outline-offset:2px}
    .primary{background:#111827;color:#fff;border-color:#111827}
    .secondary{background:#fff}
    .desc{margin-top:20px;border-top:1px dashed var(--border);padding-top:12px}
    .badge{display:inline-block;min-width:18px;text-align:center;font-weight:700}
  </style>
</head>
<body>
  <header>
    <div class="container" style="display:flex;align-items:center;justify-content:space-between;gap:10px">
      <a id="backLink" href="index.html">â† è¿”å›é¦–é </a>
      <div class="muted">å¾…å®š</div>
    </div>
  </header>

  <main class="container">
    <div class="wrap">
      <div class="preview">
        <img id="img" alt="ç”¢å“åœ–ç‰‡" onerror="this.replaceWith(Object.assign(document.createElement('div'),{textContent:'åœ–ç‰‡å¾…è£œ',className:'muted',style:'padding:16px;border:1px solid var(--border);border-radius:10px;text-align:center'}))">
      </div>
      <div class="meta">
        <h1 id="title">æš«å®šå•†å“</h1>
        <div class="price" id="price">HKD â€”</div>
        <div class="row"><span id="stockLabel">åº«å­˜</span>ï¼š<span id="stock">999</span></div>
        <div class="row">
          <span id="qtyLabel">æ•¸é‡</span>ï¼š
          <input id="qty" type="number" value="1" min="1" max="999">
        </div>
        <div class="row" style="display:flex;gap:10px;flex-wrap:wrap">
          <button class="btn primary" id="buyNow">ç«‹å³è³¼è²·</button>
          <button class="btn secondary" id="addCart">åŠ å…¥è³¼ç‰©è»Š</button>
          <button class="btn secondary" id="goCheckout">å»çµç®— ğŸ›’<span id="cartBadge" class="badge">0</span></button>
        </div>
      </div>
    </div>

    <section class="desc">
      <h3 id="detailTitle">å•†å“è©³æƒ…</h3>
      <p id="detail">ï¼ˆæ­¤è™•æš«ç•™ç©ºï¼Œä¹‹å¾Œå¯è£œå……è©³ç´°ä»‹ç´¹èˆ‡è¦æ ¼ã€‚ï¼‰</p>
    </section>
  </main>

  <footer>
    <div class="container">Â© <span id="year"></span> å¾…å®š â€¢ All rights reserved</div>
  </footer>

  <script>
    // ========== å¤šèª ==========
    const I18N = {
      'zh-HK': { back:'â† è¿”å›é¦–é ', stock:'åº«å­˜', qty:'æ•¸é‡', buy:'ç«‹å³è³¼è²·', add:'åŠ å…¥è³¼ç‰©è»Š', goCheckout:'å»çµç®—', detailTitle:'å•†å“è©³æƒ…', added:'å·²åŠ å…¥è³¼ç‰©è»Š', currency:'HKD' },
      'zh-CN': { back:'â† è¿”å›é¦–é¡µ', stock:'åº“å­˜', qty:'æ•°é‡', buy:'ç«‹å³è´­ä¹°', add:'åŠ å…¥è´­ç‰©è½¦', goCheckout:'å»ç»“ç®—', detailTitle:'å•†å“è¯¦æƒ…', added:'å·²åŠ å…¥è´­ç‰©è½¦', currency:'HKD' },
      'en':    { back:'â† Back to Home', stock:'Stock', qty:'Qty', buy:'Buy now', add:'Add to cart', goCheckout:'Checkout', detailTitle:'Details', added:'Added to cart', currency:'HKD' }
    };
    const params = new URLSearchParams(location.search);
    const lc = params.get('lc') || localStorage.getItem('dordor-locale') || 'zh-HK';
    localStorage.setItem('dordor-locale', lc);
    document.documentElement.lang = lc;
    const t = I18N[lc] || I18N['zh-HK'];

    // ========== ç”¢å“è³‡æ–™ï¼ˆèˆ‡é¦–é ä¸€è‡´ï¼Œä¸‰èªæ¨™é¡Œï¼‰==========
    const IMG = n => `Archive/Untitled_design/${n}.png`;
    const PRODUCTS = [
      // id, price(cent), titles
      {id:19, price:0,   zh_hk:'Life-Space å…’ç«¥ç›Šç”ŸèŒç²‰ 60g', zh_cn:'Life-Space å„¿ç«¥ç›Šç”ŸèŒç²‰ 60g', en:'Life-Space Kids Probiotic Powder 60g'},
      {id:18, price:0,   zh_hk:'Life-Space é›™å€å¼·åº¦ç›Šç”ŸèŒ 30ç²’', zh_cn:'Life-Space åŒå€å¼ºåº¦ç›Šç”ŸèŒ 30ç²’', en:'Life-Space Double Strength Probiotic 30 caps'},
      {id:14, price:21000, zh_hk:"Caruso's è† åŸè›‹ç™½ç²‰ 100g", zh_cn:"Caruso's èƒ¶åŸè›‹ç™½ç²‰ 100g", en:"Caruso's Collagen Powder 100g"},
      {id:15, price:21000, zh_hk:"Caruso's è† åŸè›‹ç™½ 60ç‰‡", zh_cn:"Caruso's èƒ¶åŸè›‹ç™½ 60ç‰‡", en:"Caruso's Collagen 60 tabs"},
      {id:17, price:0,   zh_hk:"Designs for Health é«˜å¼·åº¦ Omega-3 120ç²’", zh_cn:"Designs for Health é«˜å¼ºåº¦ Omega-3 120ç²’", en:"DFH High-Potency Omega-3 120 caps"},
      {id:1,  price:43000, zh_hk:'PURITI éº¥ç›§å¡èœœç³– MGO350 1kg', zh_cn:'PURITI éº¦å¢å¡èœ‚èœœ MGO350 1kg', en:'PURITI Manuka Honey MGO350 1kg'},
      {id:2,  price:6500, zh_hk:'Hismile ç‰™è† 60g â€“ è–„è·æœ±å¤åŠ›', zh_cn:'Hismile ç‰™è† 60g â€“ è–„è·å·§å…‹åŠ›', en:'Hismile Toothpaste 60g â€“ Choc Mint'},
      {id:3,  price:6500, zh_hk:'Hismile ç‰™è† 60g â€“ å£«å¤šå•¤æ¢¨å¥¶æ²¹', zh_cn:'Hismile ç‰™è† 60g â€“ è‰è“å¥¶æ²¹', en:'Hismile Toothpaste 60g â€“ Strawberry Cream'},
      {id:4,  price:6500, zh_hk:'Hismile ç‰™è† 60g â€“ å¯æ¨‚å‘³', zh_cn:'Hismile ç‰™è† 60g â€“ å¯ä¹å‘³', en:'Hismile Toothpaste 60g â€“ Cola'},
      {id:5,  price:6500, zh_hk:'Skin Control å¯æ„›æš—ç˜¡è²¼ 36ç‰‡', zh_cn:'Skin Control å¯çˆ±ç—˜ç—˜è´´ 36ç‰‡', en:'Skin Control Cute Acne Patches 36pcs'},
      {id:6,  price:5500, zh_hk:'Dr.PAWPAW æ½¤å”‡è† 10ml', zh_cn:'Dr.PAWPAW æ¶¦å”‡è† 10ml', en:'Dr.PAWPAW Balm 10ml'},
      {id:7,  price:5500, zh_hk:'Dr.PAWPAW è±å”‡è­·å”‡æ²¹ 8ml', zh_cn:'Dr.PAWPAW ä¸°å”‡æŠ¤å”‡æ²¹ 8ml', en:'Dr.PAWPAW Plumping Lip Oil 8ml'},
      {id:8,  price:5500, zh_hk:'Dr.PAWPAW æœ‰è‰²æ½¤å”‡è† ç²‰ç´… 10ml', zh_cn:'Dr.PAWPAW æœ‰è‰²æ¶¦å”‡è† ç²‰çº¢ 10ml', en:'Dr.PAWPAW Tinted Balm Pink 10ml'},
      {id:9,  price:5500, zh_hk:'Dr.PAWPAW æœ‰è‰²æ½¤å”‡è† çŠç‘š 10ml', zh_cn:'Dr.PAWPAW æœ‰è‰²æ¶¦å”‡è† çŠç‘š 10ml', en:'Dr.PAWPAW Tinted Balm Coral 10ml'},
      {id:10, price:7000, zh_hk:'T2 French Earl Grey èŒ¶åŒ… 10å…¥', zh_cn:'T2 æ³•å¼ä¼¯çˆµèŒ¶ 10åŒ…', en:'T2 French Earl Grey 10 teabags'},
      {id:11, price:6500, zh_hk:'Sunbites Grainwaves é…¸å¿Œå»‰é’è”¥ 8åŒ…', zh_cn:'Sunbites Grainwaves é…¸å¥¶æ²¹è‘± 8åŒ…', en:'Sunbites Grainwaves Sour Cream & Chives 8pk'},
      {id:12, price:6500, zh_hk:'Dermal Therapy æœ‰è‰²æ½¤å”‡è† ç«ç‘°ç²‰ 8g', zh_cn:'Dermal Therapy æœ‰è‰²æ¶¦å”‡è† ç«ç‘°ç²‰ 8g', en:'Dermal Therapy Tinted Lip Balm Rose 8g'},
      {id:13, price:6500, zh_hk:'Dermal Therapy æœ‰è‰²æ½¤å”‡è† èœœæ¡ƒè£¸ 8g', zh_cn:'Dermal Therapy æœ‰è‰²æ¶¦å”‡è† èœœæ¡ƒè£¸ 8g', en:'Dermal Therapy Tinted Lip Balm Peach 8g'},
      {id:16, price:6500, zh_hk:'Healthy Care èœ‚è† æ¶² 25ml', zh_cn:'Healthy Care èœ‚èƒ¶æ¶² 25ml', en:'Healthy Care Propolis Liquid 25ml'}
    ];
    const getTitle = (p) => lc==='zh-CN' ? (p.zh_cn||p.zh_hk) : lc==='en' ? (p.en||p.zh_hk) : p.zh_hk;
    const findProduct = (id) => PRODUCTS.find(x=>String(x.id)===String(id)) || {id, price:0, zh_hk:`æš«å®šå•†å“ ${id}`, zh_cn:`æš‚å®šå•†å“ ${id}`, en:`TBD ${id}`};

    // ========== åˆå§‹åŒ– ==========
    document.getElementById('year').textContent = new Date().getFullYear();

    const id = params.get('id') || '1';
    const p  = findProduct(id);
    const imgPath = IMG(id);

    // æ–‡æ¡ˆ
    document.getElementById('backLink').textContent = t.back;
    const back = new URL('index.html', location.href); back.searchParams.set('lc', lc);
    document.getElementById('backLink').href = back.toString();

    document.getElementById('img').src = imgPath;
    document.getElementById('title').textContent = getTitle(p);
    document.getElementById('price').textContent = p.price ? `${t.currency} ${(p.price/100).toFixed(2)}` : `${t.currency} â€”`;
    document.getElementById('stockLabel').textContent = t.stock;
    document.getElementById('qtyLabel').textContent = t.qty;
    document.getElementById('buyNow').textContent = t.buy;
    document.getElementById('addCart').textContent = t.add;
    document.getElementById('goCheckout').textContent = t.goCheckout + ' ğŸ›’';
    document.getElementById('detailTitle').textContent = t.detailTitle;

    // ========== è³¼ç‰©è»Š ==========
    const CART_KEY='dordor-cart';
    const getCart=()=>{ try{ return JSON.parse(localStorage.getItem(CART_KEY))||[] }catch{ return [] } };
    const setCart=(c)=> localStorage.setItem(CART_KEY, JSON.stringify(c));
    const addToCart=(item)=>{
      const c=getCart(); const i=c.findIndex(x=>x.id===item.id);
      if(i>=0) c[i].qty+=item.qty; else c.push(item);
      setCart(c); updateBadge();
    };
    function count(){ return getCart().reduce((s,x)=>s+x.qty,0); }
    function updateBadge(){ const b=document.getElementById('cartBadge'); if(b) b.textContent=String(count()); }
    updateBadge();

    const qtyEl=document.getElementById('qty');

    document.getElementById('addCart').onclick=()=>{
      const qty=Math.max(1, parseInt(qtyEl.value||'1',10));
      addToCart({ id:String(id), title:getTitle(p), price_cents:p.price||0, currency:t.currency, image:imgPath, qty });
      alert(t.added);
    };

    document.getElementById('buyNow').onclick=()=>{
      const qty=Math.max(1, parseInt(qtyEl.value||'1',10));
      setCart([{ id:String(id), title:getTitle(p), price_cents:p.price||0, currency:t.currency, image:imgPath, qty }]);
      const url = new URL('checkout.html', location.href); url.searchParams.set('lc', lc);
      location.href = url.toString();
    };

    document.getElementById('goCheckout').onclick=()=>{
      const url = new URL('checkout.html', location.href); url.searchParams.set('lc', lc);
      location.href = url.toString();
    };
  </script>
</body>
</html>