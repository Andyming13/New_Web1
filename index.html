<!DOCTYPE html>
<html lang="zh-HK">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>å¾…å®š | ç²¾é¸é è³¼ãƒ»ç¾è²¨å°ˆå€</title>
  <meta name="description" content="é¦™æ¸¯ä»£è³¼ç¶²ç«™ Demoï¼šç²¾é¸é è³¼ã€ç¾è²¨å¥½ç‰©ã€æ¾³æ´²ä»£è³¼æœå‹™" />
  <link rel="icon" href="/favicon.ico" />
  <style>
    :root{ --bg:#ffffff; --fg:#111827; --muted:#6b7280; --card:#f9fafb; --border:#e5e7eb; --ring:#3b82f6; --maxw:1200px; }
    *{box-sizing:border-box} html,body{height:100%}
    body{ margin:0; font-family: ui-sans-serif,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans";
      background:var(--bg); color:var(--fg); -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; }
    a{color:inherit;text-decoration:none}
    .container{width:100%;max-width:var(--maxw);padding:0 12px;margin:0 auto}

    /* Headerï¼ˆæ›´ç´§å‡‘ï¼‰ */
    .site-header{position:sticky;top:0;z-index:50;background:rgba(255,255,255,.95);
      backdrop-filter:saturate(180%) blur(8px);border-bottom:1px solid var(--border)}
    .header-inner{display:flex;align-items:center;justify-content:space-between;height:50px;gap:8px}
    .left{display:flex;align-items:center;gap:12px}
    .logo{font-weight:800;font-size:16px;white-space:nowrap;padding:2px 8px;border:1px solid var(--border);border-radius:8px}
    nav.nav{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
    nav.nav a{color:var(--muted);padding:6px 8px;border-radius:10px;font-size:13px}
    nav.nav a:hover,[aria-current="page"]{color:var(--fg);background:#f3f4f6}
    .right{display:flex;align-items:center;gap:6px}
    .iconbtn,.select,.input{height:32px;border-radius:10px;border:1px solid var(--border);background:#fff;padding:0 10px;display:inline-flex;align-items:center;gap:6px;cursor:pointer;font-size:13px}
    .input{min-width:180px}
    .badge{min-width:18px;text-align:center;font-weight:700}
    @media (max-width:640px){ .header-inner{flex-wrap:wrap;height:auto;padding:6px 0} .input{flex:1;min-width:120px} }

    /* Banners */
    .banner{width:100%;margin:12px auto 14px;border:1px solid var(--border);border-radius:12px;overflow:hidden;background:#fff}
    .banner img{display:block;width:100%;height:auto;object-fit:cover}

    /* Sections / Grid */
    .section{padding:8px 0 4px}
    .sec-head{display:flex;align-items:center;justify-content:space-between;margin:4px 0 8px}
    .sec-title{font-weight:700;font-size:16px}
    .grid{display:grid;gap:12px;grid-template-columns:repeat(12,1fr)}
    @media (max-width:1024px){.grid{grid-template-columns:repeat(8,1fr)}}
    @media (max-width:640px){.grid{grid-template-columns:repeat(4,1fr)}}
    .card{grid-column:span 4;background:var(--card);border:1px solid var(--border);border-radius:12px;overflow:hidden}
    .media{aspect-ratio:1/1;background:#fff;display:flex;align-items:center;justify-content:center}
    .media img{max-width:100%;max-height:100%;object-fit:contain}
    .content{padding:8px 10px;display:flex;align-items:center;justify-content:space-between;gap:8px}
    .title{font-size:13px;font-weight:600}
    .muted{color:var(--muted);font-size:12px}
    .site-footer{margin-top:24px;padding:14px 0;border-top:1px solid var(--border);color:var(--muted);font-size:12px}

    /* Auth modal */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.35);display:none;align-items:center;justify-content:center;padding:12px;z-index:100}
    .modal.open{display:flex}
    .dialog{width:min(460px,100%);background:#fff;border:1px solid var(--border);border-radius:12px;overflow:hidden;color:#111827}
    .dlg-head{padding:10px 12px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center}
    .dlg-body{padding:12px;display:grid;gap:10px}
    .tabs{display:flex;gap:6px}
    .tab{height:30px;border:1px solid var(--border);border-radius:8px;background:#fff;padding:0 10px;cursor:pointer;font-size:13px}
    .dlg-input{height:34px;border:1px solid var(--border);border-radius:8px;padding:0 10px;font-size:13px}
    .dlg-actions{display:flex;gap:8px;justify-content:flex-end}
    .link{color:#2563eb;cursor:pointer}
    .checkbox{display:flex;align-items:center;gap:6px;font-size:12px}
    .err{color:#b91c1c;font-size:12px}
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <div class="left">
        <div class="logo" id="brand">å¾…å®š</div>
        <nav class="nav" aria-label="Primary">
          <a href="#" aria-current="page" data-i18n="nav.home">é¦–é </a>
          <a href="#preorder" data-i18n="nav.pre">ç²¾é¸é è³¼</a>
          <a href="#instock" data-i18n="nav.stock">ç¾è²¨å°ˆå€</a>
          <a href="#agent" data-i18n="nav.agent">æ¾³æ´²ä»£è³¼æœå‹™</a>
        </nav>
      </div>
      <div class="right">
        <label class="iconbtn" for="q">ğŸ”
          <input id="q" class="input" data-i18n-placeholder="search" placeholder="å¿«é€Ÿæœå°‹ç”¢å“" />
        </label>
        <button class="iconbtn" id="loginBtn" data-i18n="auth.login">ç™»å…¥ / è¨»å†Š</button>
        <button class="iconbtn" id="cartBtn">ğŸ›’ <span id="cartBadge" class="badge">0</span></button>
        <select id="locale" class="select" aria-label="Language">
          <option value="zh-HK">ç¹é«”ä¸­æ–‡</option>
          <option value="en">English</option>
          <option value="zh-CN">ç®€ä½“ä¸­æ–‡</option>
        </select>
      </div>
    </div>
  </header>

  <main class="container" role="main">
    <!-- é¡¶éƒ¨æ¨ªå¹…ï¼ˆç›´æ¥è·¯å¾„ï¼Œç¡®ä¿æ˜¾ç¤ºï¼‰ -->
    <section class="banner"><img src="Archive/Promo_Banner/1.png" alt="Banner 1"></section>

    <!-- ç²¾é¸é è³¼ -->
    <section class="section" id="preorder">
      <div class="sec-head"><div class="sec-title" data-i18n="sec.pre">ç²¾é¸é è³¼</div></div>
      <div class="grid" id="grid-pre"></div>
    </section>

    <section class="banner"><img src="Archive/Promo_Banner/2.png" alt="Banner 2"></section>

    <!-- ç¾è²¨å°ˆå€ -->
    <section class="section" id="instock">
      <div class="sec-head"><div class="sec-title" data-i18n="sec.stock">ç¾è²¨å¥½ç‰©</div></div>
      <div class="grid" id="grid-stock"></div>
    </section>

    <section class="banner"><img src="Archive/Promo_Banner/3.png" alt="Banner 3"></section>

    <!-- æ¾³æ´²ä»£è³¼æœå‹™ï¼ˆä½¿ç”¨ç¬¬ 4/5 å¼  Bannerï¼‰ -->
    <section class="section" id="agent">
      <div class="sec-head"><div class="sec-title" data-i18n="sec.agent">æ¾³æ´²ä»£è³¼æœå‹™</div></div>
      <div class="banner" style="margin-top:0"><img src="Archive/Promo_Banner/4.png" alt="Banner 4"></div>
      <div class="banner"><img src="Archive/Promo_Banner/5.png" alt="Banner 5"></div>
    </section>
  </main>

  <footer class="site-footer"><div class="container">Â© <span id="year"></span> <span id="brand2">å¾…å®š</span> â€¢ <span data-i18n="rights">All rights reserved</span></div></footer>

  <!-- ç™»å½•/æ³¨å†Œå¼¹çª—ï¼ˆåŒ Tabï¼‰ -->
  <div class="modal" id="authModal" aria-hidden="true" role="dialog" aria-labelledby="authTitle">
    <div class="dialog">
      <div class="dlg-head">
        <strong id="authTitle" data-i18n="auth.title">å¸³æˆ¶</strong>
        <button class="tab" id="closeAuth">âœ•</button>
      </div>
      <div class="dlg-body">
        <div class="tabs">
          <button class="tab" id="tabLogin" data-i18n="auth.loginTab">ç™»å…¥</button>
          <button class="tab" id="tabRegister" data-i18n="auth.registerTab">è¨»å†Š</button>
        </div>

        <!-- ç™»å…¥ -->
        <div id="loginView">
          <input class="dlg-input" type="email" id="loginEmail" data-i18n-placeholder="auth.email" placeholder="é›»éƒµ Email">
          <input class="dlg-input" type="password" id="loginPassword" data-i18n-placeholder="auth.password" placeholder="å¯†ç¢¼ Password">
          <div class="dlg-actions">
            <button class="tab" id="doLogin" data-i18n="auth.login">ç™»å…¥</button>
          </div>
          <div class="muted" style="font-size:12px">
            <span data-i18n="auth.noAccount">é‚„æ²’æœ‰å¸³è™Ÿï¼Ÿ</span>
            <span class="link" id="goRegister" data-i18n="auth.registerNow">ç«‹å³è¨»å†Š</span>
          </div>
          <div id="loginMsg" class="err"></div>
        </div>

        <!-- è¨»å†Š -->
        <div id="registerView" style="display:none">
          <input class="dlg-input" type="email" id="regEmail" data-i18n-placeholder="auth.email" placeholder="é›»éƒµ Email">
          <input class="dlg-input" id="regUsername" data-i18n-placeholder="auth.username" placeholder="ç”¨æˆ¶å Username">
          <input class="dlg-input" type="password" id="regPassword" data-i18n-placeholder="auth.password" placeholder="å¯†ç¢¼ Password">
          <input class="dlg-input" type="password" id="regPassword2" data-i18n-placeholder="auth.password2" placeholder="ç¢ºèªå¯†ç¢¼ Confirm password">
          <label class="checkbox">
            <input type="checkbox" id="agree" />
            <span data-i18n="auth.agree">æˆ‘å·²é–±è®€ä¸¦åŒæ„</span>
            <a class="link" href="/privacy.html" target="_blank" rel="noopener" data-i18n="auth.privacy">ç§éš±æ¢æ¬¾</a>
          </label>
          <div class="dlg-actions">
            <button class="tab" id="doRegister" data-i18n="auth.register">è¨»å†Š</button>
          </div>
          <div id="regMsg" class="err"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
  // ========== i18n ==========
  const I18N = {
    'zh-HK': {
      brand:'å¾…å®š','nav.home':'ä¸»é ','nav.pre':'ç²¾é¸é è³¼','nav.stock':'ç¾è²¨å°ˆå€','nav.agent':'æ¾³æ´²ä»£è³¼æœå‹™',
      'search':'å¿«é€Ÿæœå°‹ç”¢å“','sec.pre':'ç²¾é¸é è³¼','sec.stock':'ç¾è²¨å¥½ç‰©','sec.agent':'æ¾³æ´²ä»£è³¼æœå‹™',
      'rights':'ä¿ç•™æ‰€æœ‰æ¬Šåˆ©','auth.title':'å¸³æˆ¶','auth.login':'ç™»å…¥','auth.logout':'ç™»å‡º','auth.register':'è¨»å†Š',
      'auth.registerTab':'è¨»å†Š','auth.loginTab':'ç™»å…¥','auth.email':'é›»éƒµ','auth.password':'å¯†ç¢¼','auth.password2':'ç¢ºèªå¯†ç¢¼',
      'auth.username':'ç”¨æˆ¶å','auth.noAccount':'é‚„æ²’æœ‰å¸³è™Ÿï¼Ÿ','auth.registerNow':'ç«‹å³è¨»å†Š','auth.agree':'æˆ‘å·²é–±è®€ä¸¦åŒæ„','auth.privacy':'ç§éš±æ¢æ¬¾',
      'price.na':'HKD â€”','btn.add':'åŠ å…¥'
    },
    'zh-CN': {
      brand:'å¾…å®š','nav.home':'é¦–é¡µ','nav.pre':'ç²¾é€‰é¢„è´­','nav.stock':'ç°è´§ä¸“åŒº','nav.agent':'æ¾³æ´²ä»£è´­æœåŠ¡',
      'search':'å¿«é€Ÿæœç´¢äº§å“','sec.pre':'ç²¾é€‰é¢„è´­','sec.stock':'ç°è´§å¥½ç‰©','sec.agent':'æ¾³æ´²ä»£è´­æœåŠ¡',
      'rights':'ä¿ç•™æ‰€æœ‰æƒåˆ©','auth.title':'è´¦æˆ·','auth.login':'ç™»å½•','auth.logout':'é€€å‡ºç™»å½•','auth.register':'æ³¨å†Œ',
      'auth.registerTab':'æ³¨å†Œ','auth.loginTab':'ç™»å½•','auth.email':'é‚®ç®±','auth.password':'å¯†ç ','auth.password2':'ç¡®è®¤å¯†ç ',
      'auth.username':'ç”¨æˆ·å','auth.noAccount':'æ²¡æœ‰è´¦å·ï¼Ÿ','auth.registerNow':'ç«‹å³æ³¨å†Œ','auth.agree':'æˆ‘å·²é˜…è¯»å¹¶åŒæ„','auth.privacy':'éšç§æ¡æ¬¾',
      'price.na':'HKD â€”','btn.add':'åŠ å…¥'
    },
    'en': {
      brand:'TBD','nav.home':'Home','nav.pre':'Pre-Order Picks','nav.stock':'In-stock','nav.agent':'Aussie Shopping Agent',
      'search':'Quick search products','sec.pre':'Exclusive Pre-Order','sec.stock':'In-stock Goodies','sec.agent':'Aussie Shopping Agent',
      'rights':'All rights reserved','auth.title':'Account','auth.login':'Log in','auth.logout':'Log out','auth.register':'Sign up',
      'auth.registerTab':'Sign up','auth.loginTab':'Log in','auth.email':'Email','auth.password':'Password','auth.password2':'Confirm password',
      'auth.username':'Username','auth.noAccount':'No account?','auth.registerNow':'Create one','auth.agree':'I agree to the','auth.privacy':'Privacy Policy',
      'price.na':'HKD â€”','btn.add':'Add'
    }
  };
  const $ = s => document.querySelector(s);
  const $$ = s => document.querySelectorAll(s);
  function setLC(lc){
    const dict = I18N[lc] || I18N['zh-HK'];
    $$('[data-i18n]').forEach(el => { const k=el.getAttribute('data-i18n'); if(dict[k]) el.textContent=dict[k]; });
    $$('[data-i18n-placeholder]').forEach(el => { const k=el.getAttribute('data-i18n-placeholder'); if(dict[k]) el.placeholder=dict[k]; });
    $('#brand').textContent = dict.brand; $('#brand2').textContent = dict.brand;
    document.documentElement.lang = lc; localStorage.setItem('dordor-locale', lc);
  }
  function getLCFromURL(){ try{ return new URLSearchParams(location.search).get('lc'); }catch{ return null } }
  const lc = getLCFromURL() || localStorage.getItem('dordor-locale') || 'zh-HK';
  setLC(lc); $('#locale').value = lc;
  $('#locale').addEventListener('change', e=>{
    const v = e.target.value; setLC(v);
    // ä»…åœ¨é¦–é¡µæ›´æ–° URL çš„ lcï¼Œä¿æŒåˆ·æ–°åä»æ˜¯å½“å‰è¯­è¨€
    const u = new URL(location.href); u.searchParams.set('lc', v); history.replaceState(null,'',u.toString());
    // é‡æ¸²æŸ“äº§å“æ ‡é¢˜/æŒ‰é’®
    renderAll();
  });

  // ========== æ•°æ® ==========
  const IMG = n => `Archive/Untitled_design/${n}.png`;
  const PREORDER = [
    {id:19, t:{'zh-HK':'Life-Space å…’ç«¥ç›Šç”ŸèŒç²‰ 60g','zh-CN':'Life-Space å„¿ç«¥ç›Šç”ŸèŒç²‰ 60g',en:'Life-Space Probiotic Powder Kids 60g'}, price:0, img:IMG(19)},
    {id:18, t:{'zh-HK':'Life-Space é›™å€å¼·åº¦ç›Šç”ŸèŒ 30ç²’','zh-CN':'Life-Space åŒå€å¼ºåº¦ç›Šç”ŸèŒ 30ç²’',en:'Life-Space Double Strength Probiotic 30s'}, price:0, img:IMG(18)},
    {id:14, t:{'zh-HK':"Caruso's è† åŸè›‹ç™½ç²‰ 100g",'zh-CN':"Caruso's èƒ¶åŸè›‹ç™½ç²‰ 100g",en:"Caruso's Collagen Powder 100g"}, price:21000, img:IMG(14)},
    {id:15, t:{'zh-HK':"Caruso's è† åŸè›‹ç™½ 60ç‰‡",'zh-CN':"Caruso's èƒ¶åŸè›‹ç™½ 60ç‰‡",en:"Caruso's Collagen Tablets 60s"}, price:21000, img:IMG(15)},
    {id:17, t:{'zh-HK':"Designs for Health é«˜å¼·åº¦ Omega-3 120ç²’",'zh-CN':"Designs for Health é«˜å¼ºåº¦ Omega-3 120ç²’",en:"DFH OmegAvail Hi-Po 120s"}, price:0, img:IMG(17)}
  ];
  const INSTOCK = [
    {id:1,  t:{'zh-HK':'PURITI éº¥ç›§å¡èœœç³– MGO350 1kg','zh-CN':'PURITI éº¦å¢å¡èœ‚èœœ MGO350 1kg',en:'PURITI Manuka Honey MGO350 1kg'}, price:43000, img:IMG(1)},
    {id:2,  t:{'zh-HK':'Hismile ç‰™è† 60g â€“ è–„è·æœ±å¤åŠ›','zh-CN':'Hismile ç‰™è† 60g â€“ è–„è·å·§å…‹åŠ›',en:'Hismile Toothpaste 60g â€“ Choc Mint'}, price:6500, img:IMG(2)},
    {id:3,  t:{'zh-HK':'Hismile ç‰™è† 60g â€“ å£«å¤šå•¤æ¢¨å¥¶æ²¹','zh-CN':'Hismile ç‰™è† 60g â€“ è‰è“å¥¶æ²¹',en:'Hismile Toothpaste 60g â€“ Strawberry Cream'}, price:6500, img:IMG(3)},
    {id:4,  t:{'zh-HK':'Hismile ç‰™è† 60g â€“ å¯æ¨‚å‘³','zh-CN':'Hismile ç‰™è† 60g â€“ å¯ä¹å‘³',en:'Hismile Toothpaste 60g â€“ Cola'}, price:6500, img:IMG(4)},
    {id:5,  t:{'zh-HK':'Skin Control å¯æ„›æš—ç˜¡è²¼ 36ç‰‡','zh-CN':'Skin Control å¯çˆ±ç—˜ç—˜è´´ 36ç‰‡',en:'Skin Control Cute Acne Patch 36s'}, price:6500, img:IMG(5)},
    {id:6,  t:{'zh-HK':'Dr.PAWPAW æ½¤å”‡è† 10ml','zh-CN':'Dr.PAWPAW æ¶¦å”‡è† 10ml',en:'Dr.PAWPAW Balm 10ml'}, price:5500, img:IMG(6)},
    {id:7,  t:{'zh-HK':'Dr.PAWPAW è±å”‡è­·å”‡æ²¹ 8ml','zh-CN':'Dr.PAWPAW ä¸°å”‡æŠ¤å”‡æ²¹ 8ml',en:'Dr.PAWPAW Lip Oil 8ml'}, price:5500, img:IMG(7)},
    {id:8,  t:{'zh-HK':'Dr.PAWPAW æœ‰è‰²æ½¤å”‡è† ç²‰ç´… 10ml','zh-CN':'Dr.PAWPAW æœ‰è‰²æ¶¦å”‡è† ç²‰çº¢ 10ml',en:'Dr.PAWPAW Tinted Balm Pink 10ml'}, price:5500, img:IMG(8)},
    {id:9,  t:{'zh-HK':'Dr.PAWPAW æœ‰è‰²æ½¤å”‡è† çŠç‘š 10ml','zh-CN':'Dr.PAWPAW æœ‰è‰²æ¶¦å”‡è† çŠç‘š 10ml',en:'Dr.PAWPAW Tinted Balm Coral 10ml'}, price:5500, img:IMG(9)},
    {id:10, t:{'zh-HK':'T2 French Earl Grey èŒ¶åŒ… 10å…¥','zh-CN':'T2 French Earl Grey èŒ¶åŒ… 10å…¥',en:'T2 French Earl Grey Tea Bags 10s'}, price:7000, img:IMG(10)},
    {id:11, t:{'zh-HK':'Sunbites Grainwaves é…¸å¿Œå»‰é’è”¥ 8åŒ…','zh-CN':'Sunbites Grainwaves é…¸å¥¶æ²¹é’è‘± 8åŒ…',en:'Sunbites Grainwaves Sour Cream & Chives 8pks'}, price:6500, img:IMG(11)},
    {id:12, t:{'zh-HK':'Dermal Therapy æœ‰è‰²æ½¤å”‡è† ç«ç‘°ç²‰ 8g','zh-CN':'Dermal Therapy æœ‰è‰²æ¶¦å”‡è† ç«ç‘°ç²‰ 8g',en:'Dermal Therapy Tinted Lip Balm Rose 8g'}, price:6500, img:IMG(12)},
    {id:13, t:{'zh-HK':'Dermal Therapy æœ‰è‰²æ½¤å”‡è† èœœæ¡ƒè£¸ 8g','zh-CN':'Dermal Therapy æœ‰è‰²æ¶¦å”‡è† èœœæ¡ƒè£¸ 8g',en:'Dermal Therapy Tinted Lip Balm Peach 8g'}, price:6500, img:IMG(13)},
    {id:16, t:{'zh-HK':'Healthy Care èœ‚è† æ¶² 25ml','zh-CN':'Healthy Care èœ‚èƒ¶æ¶² 25ml',en:'Healthy Care Propolis Liquid 25ml'}, price:6500, img:IMG(16)}
  ];

  // ========== è´­ç‰©è½¦ ==========
  const CART_KEY='dordor-cart';
  function getCart(){ try{ return JSON.parse(localStorage.getItem(CART_KEY))||[] }catch{ return [] } }
  function setCart(c){ localStorage.setItem(CART_KEY, JSON.stringify(c)); updateBadge(); }
  function addToCart(item){ const c=getCart(); const i=c.findIndex(x=>x.id===item.id); if(i>=0) c[i].qty+=item.qty; else c.push(item); setCart(c); }
  function count(){ return getCart().reduce((s,x)=>s+x.qty,0); }
  function updateBadge(){ const b=$('#cartBadge'); if(b) b.textContent=String(count()); }

  // ========== æ¸²æŸ“ ==========
  function money(cents){ return cents ? `HKD ${(cents/100).toFixed(2)}` : I18N[localStorage.getItem('dordor-locale')||'zh-HK']['price.na']; }
  function titleOf(p){ const lang=localStorage.getItem('dordor-locale')||'zh-HK'; return p.t[lang]||p.t['zh-HK']||'TBD'; }
  function cardHTML(p){
    const lang=localStorage.getItem('dordor-locale')||'zh-HK';
    const url = new URL('product.html', location.href);
    url.searchParams.set('id', p.id);
    url.searchParams.set('lc', lang);
    return `
      <article class="card">
        <a href="${url.toString()}" style="color:inherit">
          <div class="media"><img src="${p.img}" alt="${titleOf(p)}" onerror="this.closest('.media').textContent='Image not found';this.remove()"></div>
        </a>
        <div class="content">
          <div>
            <div class="title">${titleOf(p)}</div>
            <div class="muted">${money(p.price)}</div>
          </div>
          <button class="iconbtn add" data-id="${p.id}" data-img="${p.img}">${I18N[lang]['btn.add']}</button>
        </div>
      </article>`;
  }
  function render(list, mount){
    mount.innerHTML = list.map(cardHTML).join('');
    mount.querySelectorAll('.add').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const id = Number(btn.dataset.id);
        const p  = [...PREORDER, ...INSTOCK].find(x=>x.id===id);
        addToCart({ id:String(p.id), title:titleOf(p), price_cents:p.price||0, currency:'HKD', image:p.img, qty:1 });
      });
    });
  }
  function renderAll(){
    render(PREORDER, $('#grid-pre'));
    render(INSTOCK,  $('#grid-stock'));
    updateBadge();
  }
  renderAll();

  // æœç´¢ï¼ˆå‰ç«¯è¿‡æ»¤ï¼‰
  $('#q').addEventListener('input', (e)=>{
    const kw = e.target.value.trim().toLowerCase();
    const all = [...PREORDER, ...INSTOCK];
    const match = kw ? all.filter(p => titleOf(p).toLowerCase().includes(kw)) : null;
    render(match ? match.filter(p=>PREORDER.some(a=>a.id===p.id)) : PREORDER, $('#grid-pre'));
    render(match ? match.filter(p=>INSTOCK.some(a=>a.id===p.id))  : INSTOCK,  $('#grid-stock'));
  });

  // é¡¶éƒ¨æŒ‰é’®
  $('#cartBtn').addEventListener('click', ()=>{
    const lang=localStorage.getItem('dordor-locale')||'zh-HK';
    const u = new URL('checkout.html', location.href); u.searchParams.set('lc', lang);
    location.href = u.toString();
  });

  // å¹´ä»½
  const yearEl=$('#year'); if(yearEl) yearEl.textContent=new Date().getFullYear();

  // ç™»å½•å¼¹çª—äº¤äº’
  const authModal=$('#authModal');
  function openAuth(){ authModal.classList.add('open'); showLogin(); }
  function closeAuth(){ authModal.classList.remove('open'); }
  function showLogin(){ $('#loginView').style.display='block'; $('#registerView').style.display='none'; }
  function showRegister(){ $('#loginView').style.display='none'; $('#registerView').style.display='block'; }
  $('#loginBtn').addEventListener('click', openAuth);
  $('#closeAuth').addEventListener('click', closeAuth);
  $('#tabLogin').addEventListener('click', showLogin);
  $('#tabRegister').addEventListener('click', showRegister);
  $('#goRegister').addEventListener('click', showRegister);
  authModal.addEventListener('click', e=>{ if(e.target===authModal) closeAuth(); });
  </script>
</body>
</html>